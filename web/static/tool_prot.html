<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Protein Viewer - {{GENE_SYMBOL}}</title>

  <!-- Inline CSS injected by Python -->
  {{CSS_INLINE}}

  <!-- 3Dmol.js for molecular visualization -->
  <script src="https://3dmol.csb.pitt.edu/build/3Dmol-min.js"></script>

  <!-- Inline JS injected by Python -->
  {{JS_INLINE}}
</head>
<body>
  <!-- Toolbar: left = controls, right = legend, below = cysdbControls (full width) -->
  <div id="toolbar">
    <!-- LEFT COLUMN: main controls -->
    <div id="controls">
      <label for="proteinSelect">Gene:</label>
      <select id="proteinSelect"></select>

      <label for="styleSelect">Structural Overlay:</label>
      <select id="styleSelect">
        <option value="cartoon">Protein Backbone</option>
        <option value="surface-plddt">Confidence (AlphaFold pLDDT)</option>
        <option value="surface-fpocket">Druggablity (FPocket)</option>
        <option value="surface-sasa">Solvent Exposure (FreeSASA)</option>
        <option value="surface-pi">Surface Polarity Index (FreeSASA)</option>
        <option value="surface-disorder">Intrinsic Disorder (IUPred3 + DisProt)</option>
        <option value="surface-morf">Disorder MoRF Hotspot (IUPred3)</option>
        <option value="surface-biolip2">Exp. Binding Sites (BioLiP2)</option>
      </select>

      <!-- Ligand selector (hidden by default, shown only if BioLiP2 selected) -->
      <label for="ligandSelect" id="ligandLabel">Ligands:</label>
      <select id="ligandSelect"></select>

      <!-- Ligand name block (own line, consistent spacing with controls) -->
      <div id="ligandNameBlock">
        <label id="ligandNameLabel">Ligand Name:</label>
        <span id="ligandNameValue"></span>
      </div>
    </div>

    <!-- RIGHT COLUMN: legend -->
    <div id="legend">
      <span id="legendMin">Min</span>
      <canvas id="colorLegend" width="120" height="12"></canvas>
      <span id="legendMax">Max</span>
    </div>

    <!-- FULL-WIDTH ROW BELOW: CysDB + FPocket toggles -->
    <div id="cysdbControls">
      <!-- Row 1: FPocket (base surface) -->
      <div class="cysdb-row">
        <label class="cysdb-option cysdb-label">
          FPocket:&nbsp;
          <input type="checkbox" id="cysdbFpocketBase">
        </label>
      </div>

      <!-- Row 2: CysDB options -->
      <div class="cysdb-row">
        <!-- CysDB: [color square] -->
        <span class="cysdb-label">CysDB:</span>
        <span class="cysdb-color-swatch"></span>

        <span class="cysdb-divider">[</span>

        <!-- Detected (X) -->
        <label class="cysdb-option">
          Detected
          <input type="checkbox" id="cysdbIdentified">
        </label>

        <span class="cysdb-divider">|</span>

        <!-- Hyperreactive (X) -->
        <label class="cysdb-option">
          Hyperreactive
          <input type="checkbox" id="cysdbHyperreactive">
        </label>

        <span class="cysdb-divider">|</span>

        <!-- Ligandable (X) -->
        <label class="cysdb-option">
          Ligandable
          <input type="checkbox" id="cysdbLigandable">
        </label>

        <span class="cysdb-divider">|</span>

        <!-- Act. Site (X) or Near (X) -->
        Cys @ Act. Site
        <label class="cysdb-option">
          <input type="checkbox" id="cysdbIsActSite">
        </label>
        or Near
        <label class="cysdb-option">
          <input type="checkbox" id="cysdbNearActSite">
        </label>

        <span class="cysdb-divider">|</span>

        <!-- Bind. Site (X) or Near (X) -->
        Cys @ Bind. Site
        <label class="cysdb-option">
          <input type="checkbox" id="cysdbIsBindSite">
        </label>
        or Near
        <label class="cysdb-option">
          <input type="checkbox" id="cysdbNearBindSite">
        </label>

        <span class="cysdb-divider">]</span>
      </div>
    </div>
  </div>

  <!-- Viewer container -->
  <div id="viewer-container"></div>
</body>
</html>
